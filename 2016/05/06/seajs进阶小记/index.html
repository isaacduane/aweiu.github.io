<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> seajs进阶小记 · 阿伟的博客</title><meta name="description" content="seajs进阶小记 - 余阿伟"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div id="mask" style="display: none;"><img id="mask-image" src="#" style=" "></div><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="http://awei.oss-cn-shenzhen.aliyuncs.com/libs.html" target="_blank" class="nav-list-link">JSLIBS</a></li><li class="nav-list-item"><a href="https://github.com/aweiu" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">seajs进阶小记</h1><div class="post-time">2016年5月6日</div><div class="post-content"><p>这篇文章是很久之前写在csdn上的,现在迁移过来。总有些问题是你百度都不知道怎么打关键字的问题，本文内容就是关于seajs的一些边边角角，希望能够帮到你<br><a id="more"></a></p>
<h2 id="单例模式的解决方案"><a href="#单例模式的解决方案" class="headerlink" title="单例模式的解决方案"></a>单例模式的解决方案</h2><p>js模块化开发的好处就不啰嗦了，但世上没有什么事物是完美的，无论是requireJs或是seaJs。其实完美这个词也是相对来说得，可能和每个人的设计思路，设计模式都有关系。<br>就拿本文即将说的所谓seajs的单例模式。就是无论你在页面的什么地方，哪个js文件里面，只要require/use的是同一个js,那么它们真的就是同一个。。。当初自己还傻傻地在一个模块里这么写过:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">define(function (require, exports, module) &#123;</span><br><span class="line">	var a1=require(&quot;a&quot;);</span><br><span class="line">	var a2=require(&quot;a&quot;);</span><br><span class="line">	a1.x=&quot;你又在装逼了？&quot;;</span><br><span class="line">	a2.x=&quot;不装逼我浑身难受!&quot;;</span><br><span class="line">	alert(a1.x);</span><br><span class="line">	alert(a2.x);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>运行结果:<br>两个sb弹窗都在叫着:”不装逼我浑身难受”！说好的a1,a2呢？吓得我差点报警。</p>
<p>又进行了一番测试，a模块的内容如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define(function (require, exports, module) &#123;</span><br><span class="line">	alert(&quot;a&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>你会发现,哪怕你require一万次a，弹窗也只会出现1次哦~真得就出现1次哦~<br>而且提醒一下下:require也好，use也罢，对应的js文件都只会下载一遍！所以，不要担心同一个js文件多次require会消耗大量的网络资源导致的效率问题。<br>后来仔细一琢磨，这可能就是模块化开发的特点吧——单例模式，用它就忍着吧。。<br>问题是机智的我能忍吗？一点也不能惯着！而且原生JS也表示不服，说我特么好不容易发明出来的prototype，this，还有call等等这些能够让单身狗愉快地new一个对象的技能就这么被干掉了？弄得我好像是低级语言一样。。。（此处应有笑声）<br>上面这个需求如果不用seajs的话肯定是难不倒小伙伴们的:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function a()&#123;&#125;;</span><br><span class="line">var a1=new a();</span><br><span class="line">var a2=new a();</span><br><span class="line">//......后面自行脑补。</span><br></pre></td></tr></table></figure>
<p>当初搜遍了网络，几乎没有发现过有类似的问题，更别提解决方案了，很是头疼，这也可能和本人的编程习惯有关，单例固然是好，但有时候实现某些需求得绕很大的弯子，敲一堆代码，这对于完美主义强迫症的我来说真真是个悲剧。。。<br>假设上面的a.js是我写的一个seajs模块，它是一个表格分页插件。在require了之后，我需要对其进行一些初始化的配置(绑定表格,设置回调等等)。那么问题来了，如果当前页面上只有一个分页表格一切都好说，该怎么配置插件就怎么配置，那么多个表格呢？我每次调用其方法都把对应的配置给传过去？说实话，我干不出这种蠢事。。于是好戏来了，如果你给a模块内部”exports”上下面这个神奇的函数，包你腰不酸了，腿不疼了，敲起代码也更有劲了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">define(function (require, exports, module) &#123;</span><br><span class="line">	//hi~我是随便找个地方插进来的new方法</span><br><span class="line">    exports.newInstance = function (fuc) &#123;</span><br><span class="line">        return function () &#123;</span><br><span class="line">            fuc += &quot;&quot;;</span><br><span class="line">            if (fuc.indexOf(&quot;\nexports=this;&quot;) == -1) &#123;</span><br><span class="line">                fuc = (&quot;0,(&quot; + fuc + &quot;)&quot;).replace(&quot;&#123;&quot;, &quot;&#123;\nexports=this;&quot;);</span><br><span class="line">                var p = /([\s;=]+require\s*\([\s\S]*?\))/g;</span><br><span class="line">                fuc = fuc.replace(p, &quot;$1.newInstance()&quot;);</span><br><span class="line">                p = /( *\. *newInstance *\( *\))&#123;2&#125;/g;</span><br><span class="line">                fuc = fuc.replace(p, &quot;.newInstance()&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            return new (eval(fuc))(require,exports, module);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;(arguments.callee);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>别问为什么，看上去有点蒙，仔细一琢磨，卧槽！原来是酱紫啊！就对了，我的装逼目的也就达到了。<br>于是a模块的多例使用代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">define(function (require, exports, module) &#123;</span><br><span class="line">	var a1=require(&quot;a&quot;);</span><br><span class="line">	var a2=a1.newInstance();</span><br><span class="line">	a1.doSth();</span><br><span class="line">	a2.doSth();</span><br><span class="line">	//......后面自行脑补</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>:</p>
<p>通过本函数newInstance出来的模块如果内部还有依赖，你得给它依赖的模块也实现一个newInstance方法，大家new才是真的new，这样出来的模块才是干干净净地，完全独立的模块。当然了，某些依赖链里的模块可能真得不需要重新创建实例，本着浪费就是可耻的原则，你可以把它的newInstance方法这么写:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">define(function (require, exports, module) &#123;</span><br><span class="line">	//hi~我是随便找个地方插进来的不会创建新实例的new方法</span><br><span class="line">    exports.newInstance= function () &#123;</span><br><span class="line">        return exports;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="模块记载机制"><a href="#模块记载机制" class="headerlink" title="模块记载机制"></a>模块记载机制</h2><p>千万别天真的以为你在模块里面这样:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//不要在意a,b,c,d这种命名方式。。。</span><br><span class="line">define(function (require, exports, module) &#123;</span><br><span class="line">	var a=require(&quot;a&quot;);</span><br><span class="line">	var b=require(&quot;b&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>就天真地以为,这个模块会加载完a模块之后再加载b模块。。<br>真相其实是这样的:<br>在一个模块里面,require语句的优先级是最高的，无论你将它放在模块的任意位置会优先执行require。<br>注意，优先执行require不代表你可以这么写:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">define(function (require, exports, module) &#123;</span><br><span class="line">	alert(a.x);</span><br><span class="line">	var a=require(&quot;a&quot;);</span><br><span class="line">	a.x=1;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>除非a.js是个三方插件或者a模块不对外提供任何方法和属性，仅仅是用于给页面来点特效啦，加载一些数据啦等，和代码的下文没有什么关系的事情，你大可以把require(“a”)放在任何地方，也就没必要将其赋值给某个变量了。<br>比如:<br>a.js的内容如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//a.js的全部代码就这一行 是一个并没有遵循seajs规范的三方插件</span><br><span class="line">alert(&quot;a&quot;);</span><br></pre></td></tr></table></figure>
<p>一个依赖a模块的模块内容如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">define(function (require, exports, module) &#123;</span><br><span class="line">    alert(&quot;t&quot;);</span><br><span class="line">    require(&quot;a&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行结果你会发现弹窗内容果然先是”a”，后是”t”;<br>值得注意的是seajs还有一种模块加载方法是use，它的加载时机就得看你把它写在什么地方了。<br>接上文的那个依赖a模块的模块内容如果是这么写:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">define(function (require, exports, module) &#123;</span><br><span class="line">    alert(&quot;t&quot;);</span><br><span class="line">    seajs.use(&quot;a&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这次的执行结果就是先”t”后”a”了。<br>关于上面这一点，后面我会继续说。<br>言归正传，a和b到底谁先加载,我可以肯定地告诉你，确实是a先加载，但是！恩，但是来了。但是a和b谁先加载完就得看各自的造化了，或是因为网络原因，或是因为文件大小，意思就是说你require的模块它们之间一定不要有啥耦合关系，否则很有可能会因为加载的先后顺序导致一些异常，不过话又说回来，如果你严格按照seajs的规范来设计模块的话这种事问题肯定不会出现的，各个模块内部都有独立的作用域和其明确的依赖链嘛。。</p>
<p>举一反四：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">define(function (require, exports, module) &#123;</span><br><span class="line">	seajs.use(&quot;a&quot;);</span><br><span class="line">	seajs.use(&quot;b&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>a和b的加载情况和上述是一样一样的。</p>
<h2 id="如何使用非seajs插件"><a href="#如何使用非seajs插件" class="headerlink" title="如何使用非seajs插件"></a>如何使用非seajs插件</h2><p>不得不承认，目前的seajs插件少得令人发指！(<a href="http://awei.oss-cn-shenzhen.aliyuncs.com/libs.html" target="_blank" rel="external">现在有seajs插件集了,点我查看</a>)在实际开发过程中，总会用到各种各样五颜六色的插件，它们不是jquery插件就是jquery插件！咱们不可能说一个项目当中的所有插件都自己用seajs的规范再重复造一个吧？不说时间够不够了，就算够，你造出来之后总得优化，总得调bug吧？哪有直接用市面上已经现成的，修炼多年的插件来得爽快？就算你还是说，不行！我就是喜欢重复造轮子！我就是觉得自己写的插件是最好的，别人的就是垃圾！shit！哥们，我太喜欢你了，其实你和我一样，我还真是不喜欢用别人的插件，不说别人写得好不好吧，其实主要讨厌还得去看他们出的文档，我打死都不会承认我看不懂某些充满了浓浓装逼气息的api文档的。。我靠，我又说废话了！</p>
<p>结合上文说的seajs加载机制，如果想要使用三方插件，比如:jquery-table-xxx.js,显然，它是一个jQuery插件，而且显然还依赖jquery-table.js。</p>
<p>也就是有了如下依赖关系:</p>
<ul>
<li>jquery-table-xxx依赖jquery-table</li>
<li>jquery-table依赖jquery</li>
</ul>
<p>假设jquery.js内容如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var a=1;</span><br></pre></td></tr></table></figure></p>
<p>jquery-table内容如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var b=a+1;</span><br></pre></td></tr></table></figure></p>
<p> jquery-table-xxx内容如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var c=b+1;</span><br></pre></td></tr></table></figure>
<p>主js内容如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">seajs.use(&quot;jquery&quot;,function()&#123;</span><br><span class="line">	seajs.use(&quot;jquery-table&quot;,function()&#123;</span><br><span class="line">		seajs.use(&quot;jquery-table-xxx&quot;);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">alert(c);</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>思考:</strong> 主js的运行结果一定是3吗？</p>
</blockquote>
<p>思考结束，答案是也许是3。一定要搞明白一点，主js中的alert语句虽然一定会在jquery-table-xxx.js加载之后执行，但不一定是jquery-table-xxx.js加载完毕之后执行！加载之后，加载完毕之后是不一样滴~骚年！。只有这点搞懂了，才会知道为什么seajs的项目中使用三方插件会出现一些随机错误！什么？你问为什么不在各个js文件里require各自的依赖？都说了别人写的插件，并没有遵循seajs规范，你也就不能使用require了！懂？</p>
<p>肯定有小伙伴会说，如果主js这么写:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">seajs.use(&quot;jquery&quot;,function()&#123;</span><br><span class="line">	seajs.use(&quot;jquery-table&quot;,function()&#123;</span><br><span class="line">		seajs.use(&quot;jquery-table-xxx&quot;,function()&#123;</span><br><span class="line">			alert(c);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>不就完事大吉了吗？是的。。但是你不觉得这种嵌套太变态了么。而且如果除了上述的三个插件，再来些插件:lalala.js,lalala-xxx.js，你单纯use的话。。。</p>
<p>主js要这样吗？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">seajs.use(&quot;jquery&quot;,function()&#123;</span><br><span class="line">	seajs.use(&quot;jquery-table&quot;,function()&#123;</span><br><span class="line">		seajs.use(&quot;jquery-table-xxx&quot;,function()&#123;</span><br><span class="line">			seajs.use(&quot;lalala&quot;,function()&#123;</span><br><span class="line">				seajs.use(&quot;lalala-xxx&quot;,function()&#123;</span><br><span class="line">					alert(c);</span><br><span class="line">					//这里省略使用lalala-xxx模块的代码。。编不下去了</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>卧槽！！哈哈，而且重点是lalala,lalala-xxx和另外三个js是没有半毛钱关系的，凭什么要它俩等那三个加载完毕再加载？效率呢？</p>
<p>那么主js要这样吗？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">seajs.use(&quot;jquery&quot;,function()&#123;</span><br><span class="line">	seajs.use(&quot;jquery-table&quot;,function()&#123;</span><br><span class="line">		seajs.use(&quot;jquery-table-xxx&quot;,function()&#123;</span><br><span class="line">			alert(c);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">seajs.use(&quot;lalala&quot;,function()&#123;</span><br><span class="line">	seajs.use(&quot;lalala-xxx&quot;,function()&#123;</span><br><span class="line">		//这里省略使用lalala-xxx模块的代码。。编不下去了</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>不错，加载效率是上去了，那么代码的可读性呢？业务逻辑代码会被这些加载代码给拆得七零八落</p>
<p>于是下面我要写的就是一个能够让小伙伴们愉快地使用三方插件的插件。。</p>
<ol>
<li>打开记事本(都是装逼界的同仁，你就当做我打开的是记事本呗)</li>
<li>新建文件-&gt;superUse.js(是时候来个响亮的名字亮瞎你们了)</li>
<li>内容如下:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">define(function (require, exports, module) &#123;</span><br><span class="line">    var newUse = function (array, fuc) &#123;</span><br><span class="line">        this.num = array.length;</span><br><span class="line">        this.fuc = fuc;</span><br><span class="line">        for (var i = 0; i &lt; array.length; i++) &#123;</span><br><span class="line">            this.loadJs(array[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    newUse.prototype.loadJs = function (array) &#123;</span><br><span class="line">        var that = this;</span><br><span class="line">        if (typeof(array) == &quot;string&quot;) array = [array];</span><br><span class="line">        var callBac=(array.length == 1?function()&#123;</span><br><span class="line">            if (--that.num == 0)&#123;</span><br><span class="line">                if (that.fuc)that.fuc();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;:function()&#123;</span><br><span class="line">            array.shift();</span><br><span class="line">            that.loadJs(array);</span><br><span class="line">        &#125;)</span><br><span class="line">        seajs.use(array[0],callBac);</span><br><span class="line">    &#125;</span><br><span class="line">    exports.use = function (array, fuc) &#123;</span><br><span class="line">        new newUse(array, fuc);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>调用示例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">define(function (require, exports, module) &#123;</span><br><span class="line">	var superUse=require(&quot;superUse&quot;);</span><br><span class="line">	superUse.use([</span><br><span class="line">		&quot;a&quot;,</span><br><span class="line">		[&quot;b&quot;,&quot;c&quot;],</span><br><span class="line">		[&quot;e&quot;,&quot;f&quot;]</span><br><span class="line">	],function()&#123;</span><br><span class="line">		alert(&quot;所有js全部加载完毕的回调函数&quot;);</span><br><span class="line">	&#125;)</span><br><span class="line">	//参数1(数组):[&quot;a&quot;,[&quot;b&quot;,&quot;c&quot;],[&quot;e&quot;,&quot;f&quot;]] </span><br><span class="line">		//a是个独立的三方js插件</span><br><span class="line">		//c依赖b为一个三方插件</span><br><span class="line">		//f依赖e为一个三方插件</span><br><span class="line">		//它们三个会同时按照各自的组内的依赖关系同时加载。</span><br><span class="line">	//参数2(function):function()&#123;alert(&quot;所有js全部加载完毕的回调函数&quot;);&#125; </span><br><span class="line">		//表示上述的js全部加载完毕之后会执行该回调函数，建议把业务逻辑代码全部丢进去，这样能够保证它们的执行是在三方插件全部加载完毕之后</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>好消息！好消息！根据以上逻辑，现在已经有插件实现该use方法了，而且更加强大，支持动态use更多静态资源(js,css,html)<br><a href="https://github.com/aweiu/JsLibs/wiki/seajs-utils(%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E9%9B%86" target="_blank" rel="external">https://github.com/aweiu/JsLibs/wiki/seajs-utils(%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E9%9B%86</a>)</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/04/26/IE8兼容记—完美模拟oninput/" class="next">NEXT</a></div><div data-thread-key="2016/05/06/seajs进阶小记/" data-title="seajs进阶小记" data-url="http://aweiu.com/2016/05/06/seajs进阶小记/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"seansun"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2015 - 2016 <a href="http://aweiu.com">余阿伟</a>, unless otherwise noted.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>